<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pj1.mapper.OrderMapper">

	<insert id="insertOrder" parameterType="pj1.dto.OrderItemDto">
		insert into ordereditem (mem_email,address1,address2,order_date) 
			values (#{memEmail},#{address1},#{address2},now());
	</insert>
	
	<insert id="insertOrderDetail" parameterType="pj1.dto.OrderItemDto">
		insert into orderdetail (order_num,item_num , item_amount, item_price, order_detail_status
			) 
			values (
			<foreach collection="list" item="item" index="index" separator="," open="(" close=")">
			#{orderNum},#{itemNum},#{itemAmount}, #{itemPrice}, '주문완료'
			</foreach>
			);
	</insert>
	
	<insert id="insertPaymentOrder" parameterType="pj1.dto.PaymentOrderDateDto">
		insert into pod (order_num, payment_type, payment_date, payment_price, deposit_price, deposit_name, deposit_bank) 
		<foreach collection="list" item="item" index="index" separator="," open="(" close=")">
			values (#{orderNum},#{paymentType}, now(),#{paymentPrice}, #{depositPrice}, #{depositName},#{depositBank} );
		</foreach>
	</insert>
	
	
</mapper>
